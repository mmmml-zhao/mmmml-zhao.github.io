import{rt as e}from"./PlusOutlined-BlSwA7yu.js";import{h as t,o as n,t as r}from"./WalkMap-e-i9KZuu.js";import{Mt as i,Ot as a,Pt as o,kt as s,n as c,r as l,t as u}from"./index-ByHgRN-m.js";var d={icon:{tag:`svg`,attrs:{viewBox:`64 64 896 896`,focusable:`false`},children:[{tag:`path`,attrs:{d:`M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z`}}]},name:`arrow-left`,theme:`outlined`},f=o(i());function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}var m=f.forwardRef((t,n)=>f.createElement(e,p({},t,{ref:n,icon:d}))),h={icon:{tag:`svg`,attrs:{viewBox:`64 64 896 896`,focusable:`false`},children:[{tag:`path`,attrs:{d:`M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm-88-532h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8zm224 0h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8z`}}]},name:`pause-circle`,theme:`outlined`};function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}var _=f.forwardRef((t,n)=>f.createElement(e,g({},t,{ref:n,icon:h}))),v=u(),y=()=>{let{id:e}=s(),i=a(),{walks:o}=c(),u=(0,f.useRef)(null),[d,p]=(0,f.useState)(!1),[h,g]=(0,f.useState)(!1),[y,b]=(0,f.useState)(!1),x=o.find(t=>t.id==e),S=`walk_completed_${e}`;return(0,f.useEffect)(()=>{e&&localStorage.getItem(S)===`true`&&(b(!0),console.log(`[View] æ£€æµ‹åˆ°æ­¤è·¯çº¿å·²æ’­æ”¾å®Œæ¯•`))},[e,S]),(0,f.useEffect)(()=>{x&&console.log(`[Viewé¡µé¢è°ƒè¯•] è·¯å¾„æ•°æ®`,{id:x.id,name:x.name,mapId:x.mapId,mapView:x.mapView,pointsCount:x.points?.length||0,points:x.points})},[x]),(0,f.useEffect)(()=>{if(x&&!h&&u.current){let e=setTimeout(()=>{u.current?.walkStart(),p(!0),g(!0)},500);return()=>clearTimeout(e)}},[x,h]),x?y?(0,v.jsxs)(`div`,{style:{minHeight:`100vh`,backgroundColor:`#FFF8E7`,position:`relative`,display:`flex`,justifyContent:`center`,alignItems:`center`},children:[(0,v.jsx)(`div`,{style:{fontSize:`28px`,fontWeight:`500`,color:`#8B4513`,textAlign:`center`,padding:`0 20px`,lineHeight:`1.6`},children:`å“¦å“Ÿï¼Œè¿˜æƒ³çœ‹å•Šï¼Œé‚£å°±å»æ‰¾æ‰¾ç¥ç§˜é’¥åŒ™å§ğŸ˜†ğŸ˜‰`}),(0,v.jsx)(`button`,{onClick:()=>{e&&(localStorage.removeItem(S),console.log(`[View] å·²æ¸…é™¤å®Œæˆæ ‡è¯†ï¼Œåˆ·æ–°é¡µé¢`),b(!1),window.location.reload())},style:{position:`fixed`,top:0,left:0,width:`50px`,height:`50px`,backgroundColor:`transparent`,border:`none`,cursor:`pointer`,zIndex:9999,opacity:0},title:`ç‚¹å‡»é‡æ–°æ’­æ”¾`})]}):(0,v.jsxs)(`div`,{style:{minHeight:`100vh`,backgroundColor:`#FFF8E7`,padding:`20px`},children:[(0,v.jsxs)(`div`,{style:{maxWidth:`1400px`,margin:`0 auto 20px auto`,display:`flex`,justifyContent:`space-between`,alignItems:`center`,gap:`16px`},children:[(0,v.jsx)(t,{size:`large`,icon:(0,v.jsx)(m,{}),onClick:()=>{i(`/`)},style:{height:`44px`,borderRadius:`8px`},children:`è¿”å›`}),(0,v.jsxs)(`div`,{style:{flex:1,textAlign:`center`},children:[(0,v.jsx)(`h2`,{style:{margin:0,fontSize:`24px`,fontWeight:`600`,color:`#8B4513`},children:x.name}),x.description&&(0,v.jsx)(`p`,{style:{margin:`4px 0 0 0`,fontSize:`14px`,color:`#A0826D`},children:x.description})]}),(0,v.jsx)(t,{size:`large`,type:`primary`,icon:d?(0,v.jsx)(_,{}):(0,v.jsx)(n,{}),onClick:()=>{d?(u.current?.walkStop(),p(!1)):(u.current?.walkStart(),p(!0))},style:{backgroundColor:`#D4A574`,borderColor:`#D4A574`,height:`44px`,borderRadius:`8px`},children:d?`æš‚åœ`:`æ’­æ”¾`})]}),(0,v.jsx)(`div`,{style:{maxWidth:`1400px`,margin:`0 auto`,backgroundColor:`#FFFCF5`,borderRadius:`16px`,padding:`20px`,boxShadow:`0 2px 8px rgba(139, 69, 19, 0.08)`},children:(0,v.jsx)(r,{ref:u,mode:`view`,mapId:x.mapId,value:x.points,mapView:x.mapView,onAnimationEnd:()=>{p(!1),e&&(localStorage.setItem(S,`true`),console.log(`[View] åŠ¨ç”»æ’­æ”¾å®Œæ¯•ï¼Œå·²å­˜å‚¨å®Œæˆæ ‡è¯†`))}})})]}):(0,v.jsx)(`div`,{style:{minHeight:`100vh`,backgroundColor:`#FFF8E7`,display:`flex`,justifyContent:`center`,alignItems:`center`},children:(0,v.jsx)(l,{size:`large`,tip:`åŠ è½½ä¸­...`})})};export{y as default};